*******************üí´ Core Player System (player_data.js)*******************




| Function                          | Purpose                                                                                           |
| --------------------------------- | ------------------------------------------------------------------------------------------------- |
| **createPlayer(selectedClass)**   | Creates the player object using the chosen class and name, initializes stats, and saves the game. |
| **window.addExperience(amount)**  | Adds EXP to the player, checks for level-up, and updates UI elements.                             |
| **window.levelUp()**              | Handles level progression ‚Äî increases stats, resets EXP, and updates display.                     |
| **window.syncPlayerInGame()**     | Syncs all player stats and visuals (portrait, class icon, bars, etc.) across systems.             |
| **window.updateClassIcon()**      | Updates the class icon image and glow effect in Explore UI.                                       |
| **window.updateExpDisplay()**     | Refreshes the EXP + Level text in the inventory overlay.                                          |
| **window.updateStatsUI()**        | Updates the values in the Player Stats list (HP, Attack, Mana, etc.).                             |
| **window.updatePlayerPortrait()** | Updates the player portrait shown in the top-right corner of the Explore screen.                  |
| **window.updatePlayerInfoBox()**  | Updates the small info box beside the portrait (Princess [Name], Level, EXP).                     |




*******************‚öîÔ∏è Combat System (realtime_combat.js)*******************

| Function                           | Purpose                                                                                     |
| ---------------------------------- | ------------------------------------------------------------------------------------------- |
| **playerAttack()**                 | Performs melee attack (Spacebar) ‚Äî detects enemies in range and applies damage.             |
| **castSpell()**                    | Triggers AoE magic spell (key `F`), consumes mana, damages enemies, and grants XP.          |
| **castHeal()**                     | Restores player HP using mana and healPower; displays healing animation.                    |
| **spawnProjectile(p, x, y)**       | Fires ranged attacks toward mouse click; creates glowing projectile.                        |
| **updateProjectiles(ctx)**         | Moves, renders, and detects collisions for all projectiles.                                 |
| **damagePlayer(amount)**           | Applies damage to the player (with armor mitigation), updates HP, triggers death/game over. |
| **resolvePlayerEnemyCollisions()** | Prevents player and enemies from overlapping; adjusts positions.                            |
| **spawnEnemies(n)**                | Spawns enemy objects on the map.                                                            |
| **Enemy.update(p)**                | AI movement + attack behavior toward player.                                                |
| **Enemy.draw(ctx)**                | Draws enemy circle and HP bar.                                                              |
| **isCritical(p)**                  | Calculates critical hit chance (currently fixed 10%).                                       |
| **getRangedDamage(p)**             | Returns player‚Äôs ranged attack damage for projectiles.                                      |




*******************üåà Visual Effects & Feedback (effects.js)*******************

| Function                                     | Purpose                                                     |
| -------------------------------------------- | ----------------------------------------------------------- |
| **window.showAttackEffect(x, y)**            | Displays the melee hit aura and sparkles around the player. |
| **window.showCritEffect(x, y)**              | Creates a gold sparkle burst for critical hits.             |
| **window.showNoManaEffect()**                | Displays blue ‚Äúout of mana‚Äù puff animation on the player.   |
| **window.showEnemyAttackEffect(x, y)**       | Red flash + sparkles when the player takes damage.          |
| **window.showDamageText(text, x, y, color)** | Shows floating damage or healing numbers on screen.         |
| **window.showPlayerDamageText(amount)**      | Displays fixed-screen damage numbers for the player.        |




*******************üß≠ Exploration & UI Management (explore.js / gamenavbar.js)*******************

| Function                           | Purpose                                                                |
| ---------------------------------- | ---------------------------------------------------------------------- |
| **window.combatLoop()**            | Main render/update loop for the Explore scene; draws player + enemies. |
| **startRespawn() / stopRespawn()** | Handles timed enemy respawns while exploring.                          |
| **closeAllOverlays()**             | Closes inventory, settings, quests, or controls overlays.              |
| **toggleInventory(show)**          | Opens or closes inventory overlay safely while pausing Explore.        |




*******************üíæ Save & Load System (save.js)*******************

| Function                | Purpose                                                 |
| ----------------------- | ------------------------------------------------------- |
| **saveGame()**          | Saves current player data and progress to localStorage. |
| **loadGame(slot)**      | Loads a selected save slot and restores all stats/UI.   |
| **populateSaveSlots()** | Displays list of available save files in Load Menu.     |




*******************üí¨ Story & Message System (screens.js)*******************

| Function                                            | Purpose                                                           |
| --------------------------------------------------- | ----------------------------------------------------------------- |
| **window.showGameMessage(text, callback)**          | Displays a full-screen intro / message overlay (pauses the game). |
| **window.showStoryMessage(text, callback)**         | Uses your existing custom alert box for one-line story dialogue.  |
| **window.showSpeech(lines, callback)** *(optional)* | Shows multi-line story dialogue box while the game is running.    |




*******************ü™û UI Events & Initialization*******************

| Function / Listener                               | Purpose                                                                    |
| ------------------------------------------------- | -------------------------------------------------------------------------- |
| **window.addEventListener("explore:start")**      | Fired when Explore begins; initializes combat, player sync, intro message. |
| **document.addEventListener("DOMContentLoaded")** | Ensures portrait + icons load immediately after page load.                 |
| **window.syncPlayerInGame()** *(auto-called)*     | Keeps visuals (portrait, icons, info) updated across events.               |




*******************üå∑ Helper Constants & Properties*******************

| Variable                | Description                                                          |
| ----------------------- | -------------------------------------------------------------------- |
| `window.player`         | Current player object and all stats.                                 |
| `window.enemies`        | Active list of enemy objects.                                        |
| `window.exploreRunning` | Boolean: whether Explore gameplay is active.                         |
| `window.uiState`        | Tracks active UI context (‚Äúexplore‚Äù, ‚Äúinventory‚Äù, ‚Äúsettings‚Äù, etc.). |
